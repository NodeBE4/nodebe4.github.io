---
layout: default
---
<style>
body {
  background-image: url('https://picsum.photos/1920/1080/?random');
  background-repeat: no-repeat;
  background-position: center top;
}

a:hover{
  text-decoration:none;
  text-shadow: 2px 2px 5px purple;
  font-weight:bold;
}
a:hover h1{
  font-weight:bold;
  text-shadow: 2px 2px 5px purple;
}
</style>

<!-- <p style="font-size:10px;color:red;">论坛主网址和备用网址的本月免费小时数均已用尽，将于7月1日恢复上线，欢迎访问BE4新闻站 <a href="https://be4news.pythonanywhere.com/" target="_blank">https://be4news.pythonanywhere.com/</a> .</p> -->
<div id="main-content" class="row row-eq-height" style="min-height: 100vh">
  <p>请选择NodeBE4论坛的两个地址之一:</p>
  <div class="col-12">
    <ul>
      <li>主网址 <a href="https://be4.herokuapp.com/">https://be4.herokuapp.com/</a>.</li>
      <li>副网址 <a href="https://cf5.herokuapp.com/">https://cf5.herokuapp.com/</a>.</li>
      <li>BE4新闻站 （新网址）<a href="https://be4news.pythonanywhere.com/">https://be4news.pythonanywhere.com/</a></li>
      <li>BE4新闻站 （备份网址）<a href="https://be4-news.herokuapp.com/">https://be4-news.herokuapp.com/</a></li>
      <li>观点：优秀UP主言论跟踪<a href="https://nodebe4.github.io/opinion">https://nodebe4.github.io/opinion</a> 短链接 <a href="https://git.io/JJCxS">https://git.io/JJCxS</a> </li>
      <li>外媒报道<a href="https://nodebe4.github.io/waimei">https://nodebe4.github.io/waimei</a> 短链接 <a href="https://git.io/JJCxX">https://git.io/JJCxX</a> </li>
      <li>社会：公民记者实拍<a href="https://nodebe4.github.io/society">https://nodebe4.github.io/society</a> 短链接 <a href="https://git.io/JUtSx">https://git.io/JUtSx</a> </li>
      <li>英雄<a href="https://nodebe4.github.io/hero">https://nodebe4.github.io/hero</a> 短链接 <a href="https://git.io/JUt9v">https://git.io/JUt9v</a> </li>
      <li>BE4新闻站-阅读器<a href="https://nodebe4.github.io/news">https://nodebe4.github.io/news</a> 短链接 <a href="https://git.io/JJCxH">https://git.io/JJCxH</a> </li>
    </ul>
  </div>
  <p>短链接分享 <a href="https://git.io/JJCx0">https://git.io/JJCx0</a> </p>
<p style="font-size: 12px;color: blue">用最短的时间获取最好的信息，无操纵引导, 无注意力经济, no charm no bullshit. Greed is good,  Boring is good, JavaScript is good. <i>——BE4</i></p>
</div>

<script type="text/javascript" >
  // https://coolors.co/
  const palettes = [
    {"Rich Black FOGRA 29":"0d1321","Prussian Blue":"1d2d44","Black Coral":"3e5c76","Shadow Blue":"748cab","Eggshell":"f0ebd8"},
    {"Aero Blue":"c4e7d4","Opal":"c4dacf","Periwinkle Crayola":"b9c0da","Heliotrope Gray":"998da0","Dark Liver":"63585e"},
    {"Mindaro":"ddfcad","Yellow Green Crayola":"c8e087","Moss Green":"95a472","Artichoke":"82846d","Dim Gray":"646165"},
    {"Turquoise Green":"b9e3c6","Ocean Green":"59c9a5","Ruby":"d81e5b","Prussian Blue":"23395b","Canary":"fffd98"},
    {"Opera Mauve":"ac80a0","Little Boy Blue":"89aae6","Blue NCS":"3685b5","Honolulu Blue":"0471a6","Rich Black FOGRA 29":"061826"},
    {"Vivid Burgundy":"a4243b","Ecru":"d8c99b","Harvest Gold":"d8973c","Alloy Orange":"bd632f","Charcoal":"273e47"},
    {"Raisin Black":"242331","Cafe Noir":"533e2d","Golden Brown":"a27035","Camel":"b88b4a","Flax":"ddca7d"},
    {"Rich Black FOGRA 29":"04151f","Rich Black":"183a37","Wheat":"efd6ac","Mahogany":"c44900","Dark Purple":"432534"},
    {"Raisin Black":"171a21","Cadet":"617073","Shadow Blue":"7a93ac","Baby Blue Eyes":"92bcea","Maximum Blue Purple":"afb3f7"}
  ]
  const url = "{{ site.url }}/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    var content = document.getElementById("main-content");
    content.innerHTML = ''
    // content.style['background-image']= "url('https://picsum.photos/1280/960/?random')"
    var palette = Object.values(palettes[Math.floor(Math.random() * palettes.length)])
    var cols = []
    for (i=0;i<palette.length;i++){
      cols[i] = document.createElement("div")
      cols[i].classList.add("col-sm")
      cols[i].classList.add('d-flex')
      cols[i].classList.add('flex-column')
      cols[i].classList.add('align-items-center')
      cols[i].id = "col-"+i
      cols[i].style.color='white'
      cols[i].style.opacity = 0.85
      cols[i].style.backgroundColor = "#"+palette[i]
      cols[i].style.padding=0;
      content.appendChild(cols[i])
    }
    var footer = document.createElement("div")
    footer.style['position'] = 'fixed'
    footer.style['bottom'] = '0'
    footer.style['left'] = '0'
    footer.style['right'] = '0'
    footer.style['margin-right'] = 'auto'
    footer.style['margin-left'] = 'auto'
    // footer.style['max-height'] = '50px'
    footer.style['height'] = 'auto'
    footer.classList.add('text-center')
    footer.innerHTML = `<img width="100px" src="https://i.imgur.com/01z6ArO.png" alt="本链接的QRcode"/><div style="font-size: 12px;color: #400F16">https://git.io/JJCx0</div><p class="text-center align-middle" style="font-size: 12px;color: #400F16">用最短的时间获取最好的信息，无操纵引导, 无注意力经济, no charm no bullshit. Greed is good,  Boring is good, JavaScript is good. <i>——BE4</i></p>`

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var col = item.col 
        var div0 = document.createElement('div')
        cols[col].appendChild(div0)
        div0.classList.add('p-2')
        div0.classList.add('flex-fill')
        div0.classList.add('align-middle')
        div0.style.width = '100%'
        div0.style['border-width'] = '1px'
        div0.style['border-color'] = invertColor(palette[col])
        div0.style['border-style'] = 'dashed none none none'
        // div0.style.backgroundColor = item['background-color']
        var a0 = document.createElement('a')
        div0.appendChild(a0)
        a0.href = item.url[0]
        // var img = document.createElement('img')
        // img.src = 'https://picsum.photos/600/700/?random'
        // img.classList.add('img-fluid')
        // a0.appendChild(img)
        var div = document.createElement('div')
        a0.appendChild(div)
        var h1=document.createElement('h1')
        h1.innerText = item['name']
        var d = document.createElement('div')
        d.innerText = item['desc']
        d.style.color = invertColor(palette[col])
        div.appendChild(h1)
        div.appendChild(d)
        // if (item.url[1]){
        //   var d = document.createElement('div')
        //   d.innerText = item.url[1] 
        //   d.style.color = '#F6C36D'       
        //   div.appendChild(d)
        // }
        div.style.color='white'
        div.style.width='100%'
        div.style.height='100%'
        // div.style.margin='auto'
        div.style['text-align']='center'
        // div.style['vertical-align']='middle'
        div.classList.add('align-items-center')
        // div.classList.add('p-2')
        // div.classList.add('flex-fill')
        var span = document.createElement('p')
        span.innerText='状态'
        span.style.color='#E4CBC3'
        div.appendChild(span)
        var p = test_alive(item.url[0])
        div.appendChild(p)
      })
    })
    content.appendChild(footer)
  })

function test_alive(url){
  var divstatus = document.createElement('p')
  divstatus.style['font-size'] = '12px'
  divstatus.style.color='#E4CBC3'
  divstatus.innerText = '测试中...'
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        divstatus.innerText = data.responseText;
        if (data.responseText.includes('502')){
          divstatus.style.color='#FBB7B7'
          let grandparent = divstatus.parentNode.parentNode.parentNode
          grandparent.parentNode.removeChild(grandparent)
        }else{
          divstatus.style.color='#B6FAC8'
        }
      }
  });
  return divstatus
}

function invertColor(hex) {
    if (hex.indexOf('#') === 0) {
        hex = hex.slice(1);
    }
    // convert 3-digit hex to 6-digits.
    if (hex.length === 3) {
        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
    }
    if (hex.length !== 6) {
        throw new Error('Invalid HEX color.');
    }
    // invert color components
    var r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),
        g = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),
        b = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);
    // pad each with zeros and return
    return '#' + padZero(r) + padZero(g) + padZero(b);
}

function padZero(str, len) {
    len = len || 2;
    var zeros = new Array(len).join('0');
    return (zeros + str).slice(-len);
}
</script>